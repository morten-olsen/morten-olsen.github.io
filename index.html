<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/262caf4ea79dc510.css" as="style"/><link rel="stylesheet" href="/_next/static/css/262caf4ea79dc510.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f61b98a3487640ff.js" defer=""></script><script src="/_next/static/chunks/framework-5c743e7f6ad21a34.js" defer=""></script><script src="/_next/static/chunks/main-fb6436b8fc0318cb.js" defer=""></script><script src="/_next/static/chunks/pages/_app-552817bcbca3efa3.js" defer=""></script><script src="/_next/static/chunks/894-14a7ec8d7c5d0b1e.js" defer=""></script><script src="/_next/static/chunks/pages/index-0aa203d113e2716d.js" defer=""></script><script src="/_next/static/y7INGK_DVu8tDiLZNxzH_/_buildManifest.js" defer=""></script><script src="/_next/static/y7INGK_DVu8tDiLZNxzH_/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.6">*{box-sizing:border-box;}/*!sc*/
html{font-size:16px;}/*!sc*/
h1,h2,h3,h4,h5,h6{margin:0;}/*!sc*/
html,body,body > #__next{height:100%;}/*!sc*/
body{margin:0;padding:0;font-family:'Merriweather',sans-serif;background:#27102d;}/*!sc*/
a{-webkit-text-decoration:none;text-decoration:none;font-weight:bold;}/*!sc*/
data-styled.g1[id="sc-global-kguuSj1"]{content:"sc-global-kguuSj1,"}/*!sc*/
.eDOuiA{color:#ffffff;font-weight:normal;font-size:16px;}/*!sc*/
.epaSk{color:#000000;font-weight:normal;font-size:16px;}/*!sc*/
data-styled.g2[id="sc-bcXHqe"]{content:"eDOuiA,epaSk,"}/*!sc*/
.iNFUND{font-size:44.8px;font-weight:bold;}/*!sc*/
data-styled.g3[id="sc-gswNZR"]{content:"iNFUND,"}/*!sc*/
.iyhgIg{font-size:16px;font-weight:bold;}/*!sc*/
data-styled.g5[id="sc-hLBbgP"]{content:"iyhgIg,"}/*!sc*/
.eRUJfi{font-size:16px;font-weight:normal;}/*!sc*/
data-styled.g6[id="sc-eDvSVe"]{content:"eRUJfi,"}/*!sc*/
.fjIChI{background:#2b121a;color:#ffffff;min-height:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
.hxvBZ{background:#31072e;color:#ffffff;min-height:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g16[id="sc-eDWCr"]{content:"fjIChI,hxvBZ,"}/*!sc*/
.jBLopP{position:absolute;left:0;top:0;bottom:0;right:0;background-size:cover;background-position:center;opacity:0.2;background-image:url(/_next/static/images/cover-7e178830421cb87fdc7d9e505f572a91.jpg);}/*!sc*/
.eeNGrE{position:absolute;left:0;top:0;bottom:0;right:0;background-size:cover;background-position:center;opacity:0.2;}/*!sc*/
data-styled.g17[id="sc-bqWxrE"]{content:"jBLopP,eeNGrE,"}/*!sc*/
.eNMVtG{z-index:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:1000px;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g18[id="sc-ksBlkl"]{content:"eNMVtG,"}/*!sc*/
.bYDNLC{height:500px;border-right:2px solid rgba(0,0,0,0.1);-webkit-flex:1;-ms-flex:1;flex:1;min-width:200px;position:relative;margin:15px;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
@media only screen and (max-width:700px){.bYDNLC{max-height:300px;}}/*!sc*/
data-styled.g19[id="sc-hBxehG"]{content:"bYDNLC,"}/*!sc*/
.cwGUrn{background:#e7d9ac;line-height:40px;font-family:'Black Ops One',sans-serif;font-size:25px;padding:0 5px;margin:5px 0;}/*!sc*/
.iznjMi{background:#3d91ef;line-height:40px;font-family:'Black Ops One',sans-serif;font-size:25px;padding:0 5px;margin:5px 0;}/*!sc*/
.imMgaP{background:#8bae8c;line-height:40px;font-family:'Black Ops One',sans-serif;font-size:25px;padding:0 5px;margin:5px 0;}/*!sc*/
data-styled.g20[id="sc-fnGiBr"]{content:"cwGUrn,iznjMi,imMgaP,"}/*!sc*/
.fjNjpZ{top:10px;left:10px;right:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}/*!sc*/
data-styled.g21[id="sc-fEXmlR"]{content:"fjNjpZ,"}/*!sc*/
.hBeXxP{background:#e7d9ac;background-size:cover;background-position:center;background-image:url(/_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/2a07a0952873d577-Cover.png);-webkit-flex:1;-ms-flex:1;flex:1;top:0;bottom:0;right:0;left:0;}/*!sc*/
.eXFwbq{background:#3d91ef;background-size:cover;background-position:center;background-image:url(/_next/static/assets/goodwrite/a-defence-for-the-coding-challange/e74588f9d6e844d5-cover.png);-webkit-flex:1;-ms-flex:1;flex:1;top:0;bottom:0;right:0;left:0;}/*!sc*/
.cjkDEp{background:#8bae8c;background-size:cover;background-position:center;background-image:url(/_next/static/assets/goodwrite/how-to-hire-engineers-by-an-engineer/1016b01a9b16141e-cover.png);-webkit-flex:1;-ms-flex:1;flex:1;top:0;bottom:0;right:0;left:0;}/*!sc*/
data-styled.g22[id="sc-bjfHbI"]{content:"hBeXxP,eXFwbq,cjkDEp,"}/*!sc*/
.gjohKQ{height:300px;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;margin:15px;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:#31072e;}/*!sc*/
@media only screen and (max-width:700px){.gjohKQ{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:500px;}}/*!sc*/
data-styled.g23[id="sc-idXgbr"]{content:"gjohKQ,"}/*!sc*/
.cbYiBD{line-height:40px;font-family:'Black Ops One',sans-serif;font-size:25px;padding:0 5px;margin:5px 0;}/*!sc*/
data-styled.g24[id="sc-dIfARi"]{content:"cbYiBD,"}/*!sc*/
.iYzbmc{max-width:300px;padding:0 5px;margin:5px 0;overflow:hidden;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;line-height:2.1rem;}/*!sc*/
@media only screen and (max-width:700px){.iYzbmc{max-height:100px;}}/*!sc*/
data-styled.g25[id="sc-hHTYSt"]{content:"iYzbmc,"}/*!sc*/
.bfhvMK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:40px;}/*!sc*/
data-styled.g26[id="sc-dmctIk"]{content:"bfhvMK,"}/*!sc*/
.hslCrD{background:#ef23e2;background-size:cover;background-position:center;background-image:url(/_next/static/assets/goodwrite/a-meta-talk-about-git-strategies/7a46cf537aa6c16d-cover.png);-webkit-flex:1;-ms-flex:1;flex:1;top:0;bottom:0;right:0;left:0;}/*!sc*/
data-styled.g27[id="sc-kgTSHT"]{content:"hslCrD,"}/*!sc*/
.jyrEpR{position:relative;margin:15px;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:220px;height:200px;}/*!sc*/
@media only screen and (max-width:700px){.jyrEpR{width:100%;}}/*!sc*/
data-styled.g28[id="sc-fLcnxK"]{content:"jyrEpR,"}/*!sc*/
.biqdQk{line-height:20px;font-size:20px;padding:5px 5px;font-family:'Black Ops One',sans-serif;margin:5px 0;background:#34032f;}/*!sc*/
data-styled.g29[id="sc-bBABsx"]{content:"biqdQk,"}/*!sc*/
.kTLKxc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:10px;max-width:220px;position:absolute;}/*!sc*/
data-styled.g30[id="sc-iveFHk"]{content:"kTLKxc,"}/*!sc*/
.cKxnhi{background:#e80ccf;background-size:cover;background-position:center;background-image:url(/_next/static/assets/goodwrite/my-home-runs-redux/0922b239d7114bab-cover.png);position:absolute;top:0;bottom:0;right:0;left:0;}/*!sc*/
data-styled.g31[id="sc-cwSeag"]{content:"cKxnhi,"}/*!sc*/
.faQBjx{width:100%;}/*!sc*/
data-styled.g32[id="sc-lllmON"]{content:"faQBjx,"}/*!sc*/
.gNYNCb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;}/*!sc*/
data-styled.g33[id="sc-iJnaPW"]{content:"gNYNCb,"}/*!sc*/
.eOcgWs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:0 auto;width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}/*!sc*/
data-styled.g34[id="sc-gikAfH"]{content:"eOcgWs,"}/*!sc*/
.jBghfd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 auto;width:100%;}/*!sc*/
data-styled.g35[id="sc-ezOQGI"]{content:"jBghfd,"}/*!sc*/
.cHnQNe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}/*!sc*/
data-styled.g36[id="sc-bYMpWt"]{content:"cHnQNe,"}/*!sc*/
.bvgKMC{font-size:60px;line-height:80px;display:inline-block;background:#c85279;color:#ffffff;padding:0 15px;text-transform:uppercase;margin:10px;font-family:'Black Ops One',sans-serif;}/*!sc*/
@media only screen and (max-width:700px){.bvgKMC{margin:5px;font-size:3rem;line-height:3.1rem;}}/*!sc*/
.gMGFN{font-size:60px;line-height:80px;display:inline-block;background:#ef23e2;color:#ffffff;padding:0 15px;text-transform:uppercase;margin:10px;font-family:'Black Ops One',sans-serif;}/*!sc*/
@media only screen and (max-width:700px){.gMGFN{margin:5px;font-size:3rem;line-height:3.1rem;}}/*!sc*/
data-styled.g37[id="sc-kMjNwy"]{content:"bvgKMC,gMGFN,"}/*!sc*/
.vombB{position:absolute;bottom:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
.vombB:after{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:#c85279;border-radius:50%;width:80px;height:80px;content:'↓';font-size:50px;}/*!sc*/
@media only screen and (max-width:700px){.vombB:after{width:40px;height:40px;}}/*!sc*/
data-styled.g38[id="sc-ilhmMj"]{content:"vombB,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-eDWCr fjIChI"><div class="sc-bqWxrE jBLopP"></div><div class="sc-ksBlkl eNMVtG"><div class="sc-ilhmMj vombB"></div><div class="sc-bYMpWt cHnQNe"><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">Hi,</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">I&#x27;m</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">Morten</span></div><div class="sc-bYMpWt cHnQNe"><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">And</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">I</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">make</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND bvgKMC">software</span></div></div></div><div class="sc-eDWCr hxvBZ"><div class="sc-bqWxrE eeNGrE"></div><div class="sc-ksBlkl eNMVtG"><div class="sc-bYMpWt cHnQNe"><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND gMGFN">Table</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND gMGFN">of</span><span class="sc-bcXHqe sc-gswNZR sc-kMjNwy eDOuiA iNFUND gMGFN">Content</span></div><div class="sc-lllmON faQBjx"><div class="sc-iJnaPW gNYNCb"><a class="sc-idXgbr gjohKQ"><aside class="sc-kgTSHT hslCrD"></aside><div class="sc-dmctIk bfhvMK"><span class="sc-bcXHqe sc-hLBbgP sc-dIfARi eDOuiA iyhgIg cbYiBD">A meta talk about Git strategies</span><span class="sc-bcXHqe sc-eDvSVe sc-hHTYSt eDOuiA eRUJfi iYzbmc">Let me start with a (semi) fictional story; It is Friday, and you and your team have spent the last five weeks working on this excellent new feature. You have written a bunch of unit tests to ensure that you maintain your project&#x27;s impressive 100% test coverage, and both you, your product owner and the QA testers have all verified that everything is tip-top and ready to go for the launch!
You hit the big &quot;Deploy&quot; button.
3-2-1
Success! it is released to production, and everyone gets their glass of Champagne!

You go home for the weekend satisfied with the great job you did.

On Monday, you open your email to find it flooded with customers screaming that nothing is working! Oh no, you must have made a mistake!!! So you set about debugging and quickly locate the error message in your monitoring, so you checkout the code from Git and start investigating. But the error that happens isn&#x27;t even possible. So you spend the entire day debugging, again and again, coming to the same conclusion; This is not possible.

So finally, you decide to go and read the deployment log line-by-painstakingly-line, and there, on line 13.318, you see it! One of your 12 microservices failed deployment! The deployment used a script with a pipe in it. Unfortunately, the script did not have pipefail configured. The script, therefore, did not generate a non-zero exit code, so the deployment just kept humming along, deploying the remaining 11 with success. This chain of events resulted in a broken infrastructure state and unhappy customers, and you spend the entire Monday debugging and potentially the ENTIRE EXISTANCE coming to an end!


I think most developers would have a story similar to the one above, so why is getting release management right so damn hard? Modern software architecture and the tools that help us are complex machineries, which goes for our deployment tools. Therefore ensuring that every little thing is as planned means that we would have to check hundreds, if not thousands of items, each more to decipher than the last (anyone who has ever tried to solve a broken Xcode builds from an output log will know this).

So is there a better way? Unfortunately, when things break, any of those thousands of items could be the reason, so when stuff does break, the answer is most likely no, but what about just answering the simple question: &quot;Is something broken?&quot;. Well, I am glad you asked because I do believe that there is a better way, and it is a way that revolves around Git.


## Declaring your expected state

So I am going to talk about Kubernetes, yet again - A technology I use less and less but, for some reason, ends up being part of my examples more and more often.

At its core Kubernetes has two conceptually simple tasks; it stores an expected state of the resources that it is supposed to keep track of two; if any of those resources are, in fact, not in the expected state, it tries to right the wrong.

This approach means that when we interact with Kubernetes, we don&#x27;t ask it to perform a specific task - We never tell it, &quot;create three additional instances of service X,&quot; but rather &quot;, There should be five instances of service X&quot;.

This approach also means that instead of actions and events, we can use reconciliation - no tracking of what was and what is, just what we expect; the rest is the tool&#x27;s responsibility.

It also makes it very easy for Kubernetes to track the health of the infrastructure - it knows the expected state. If the actual state differs, it is in some unhealthy state, and if it is unhealthy, it should either fix it or, failing that, raise the alarm for manual intervention.


## Git as the expected state

So how does this relate to Git? Well, Git is a version control system. As such, it should keep track of the state of the code. That, to me, doesn&#x27;t just include when and why but also where - to elaborate: Git is already great at telling when something happened and also why (provided that you write good commit messages), but it should also be able to answer what is the code state in a given context.

So let&#x27;s say you have a production environment; a good Git strategy, in my opinion, should be able to answer the question, &quot;What is the expected code state on production right now?&quot;
And note the word &quot;expected&quot; here; it is crucial because Git is, of course, not able to do deployments or sync environments (in most cases) but what it can do is serve as our expected state that I talked about with Kubernetes.

The target is to be able to compare what we expect, with what is actually there completly independant of all the tooling that sits in between, as we want to remove those as a source of error or complexity.


We want to have something with the simplicity of the Kubernetes approach - we declare an expected state, and the tooling enforces this or alerts us if it can not.

We also need to ensure that we can compare our expected state to the actual state.

To achieve this we are going to focus on Git SHAs, so we will be tracking if a deployed resource is a deployment of our expected SHA.

For a web resource, an excellent way to do this could be through a `/.well-known/deployment-meta.json` while if you are running something like Terraform and AWS, you could tag your resources with this SHA - Try to have as few different methods of exposing this information as possible to keep monitoring simple.

With this piece of information, we are ready to create our monitor. Let&#x27;s say we have a Git ref called `environments/production`, and its HEAD points to what we expect to be in production, now comparing is simply getting the SHA of the HEAD commit of that ref and comparing it to our `./well-known/deployment-meta.json`. If they match, the environment is in the expected state. If not, it is unhealthy.

Let&#x27;s extend on this a bit; we can add a scheduled task that checks the monitor. If it is unhealthy, it retriggers a deployment and, if that fails, raises the alarm - So even if a deployment failed and no one noticed it yet, it will get auto-corrected the next time our simple reconciler runs. This can be done simply using something like a GitHub workflow.

You could also go all in and write a crossplane controller and use the actual Kubernetes reconciler to ensure your environments are in a healty state - Go as creazy as you like, just remember to make the tool work for you, not the other way around.

So, now we have a setup where Git tracks the expected state, and we can easily compare the expected state and the actual state. Lastly, we have a reconciliation loop that tries to rectify any discrepancy.


## Conclusion

So as a developer, the only thing I need to keep track of is that my Git refs are pointing to the right stuff. Everything else is reconciliation that I don&#x27;t have to worry about - unless it is unreconcilable - and in which case, I will get alerted.

As someone responsible for the infrastructure, the only thing I need to keep track of is that the expected state matches the actual state.

No more multi-tool lookup, complex log dives or timeline reconstruction (until something fails, of course)

I believe that the switch from Git being just the code to being the code state makes a lot of daily tasks more straightforward and more transparent, builds a more resilient infrastructure and is worth considering when deciding how you want to do Git.
</span></div></a></div><div class="sc-gikAfH eOcgWs"><div class="sc-hBxehG bYDNLC"><aside class="sc-bjfHbI hBeXxP"></aside><div class="sc-fEXmlR fjNjpZ"><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">My</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">day</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">is</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">being</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">planned</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">by</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">an</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr epaSk iyhgIg cwGUrn">algorithm</span></div></div><div class="sc-hBxehG bYDNLC"><aside class="sc-bjfHbI eXFwbq"></aside><div class="sc-fEXmlR fjNjpZ"><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg iznjMi">A</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg iznjMi">defence</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg iznjMi">for</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg iznjMi">the</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg iznjMi">coding</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg iznjMi">challange</span></div></div><div class="sc-hBxehG bYDNLC"><aside class="sc-bjfHbI cjkDEp"></aside><div class="sc-fEXmlR fjNjpZ"><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">How</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">to</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">hire</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">engineers,</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">by</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">an</span><span class="sc-bcXHqe sc-hLBbgP sc-fnGiBr eDOuiA iyhgIg imMgaP">engineer</span></div></div></div><div class="sc-ezOQGI jBghfd"><a class="sc-fLcnxK jyrEpR"><aside class="sc-cwSeag cKxnhi"></aside><div class="sc-iveFHk kTLKxc"><span class="sc-bcXHqe sc-hLBbgP sc-bBABsx eDOuiA iyhgIg biqdQk">My</span><span class="sc-bcXHqe sc-hLBbgP sc-bBABsx eDOuiA iyhgIg biqdQk">home</span><span class="sc-bcXHqe sc-hLBbgP sc-bBABsx eDOuiA iyhgIg biqdQk">runs</span><span class="sc-bcXHqe sc-hLBbgP sc-bBABsx eDOuiA iyhgIg biqdQk">Redux</span></div></a></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"articles":[{"title":"A meta talk about Git strategies","content":"Let me start with a (semi) fictional story; It is Friday, and you and your team have spent the last five weeks working on this excellent new feature. You have written a bunch of unit tests to ensure that you maintain your project's impressive 100% test coverage, and both you, your product owner and the QA testers have all verified that everything is tip-top and ready to go for the launch!\nYou hit the big \"Deploy\" button.\n3-2-1\nSuccess! it is released to production, and everyone gets their glass of Champagne!\n\nYou go home for the weekend satisfied with the great job you did.\n\nOn Monday, you open your email to find it flooded with customers screaming that nothing is working! Oh no, you must have made a mistake!!! So you set about debugging and quickly locate the error message in your monitoring, so you checkout the code from Git and start investigating. But the error that happens isn't even possible. So you spend the entire day debugging, again and again, coming to the same conclusion; This is not possible.\n\nSo finally, you decide to go and read the deployment log line-by-painstakingly-line, and there, on line 13.318, you see it! One of your 12 microservices failed deployment! The deployment used a script with a pipe in it. Unfortunately, the script did not have pipefail configured. The script, therefore, did not generate a non-zero exit code, so the deployment just kept humming along, deploying the remaining 11 with success. This chain of events resulted in a broken infrastructure state and unhappy customers, and you spend the entire Monday debugging and potentially the ENTIRE EXISTANCE coming to an end!\n\n\nI think most developers would have a story similar to the one above, so why is getting release management right so damn hard? Modern software architecture and the tools that help us are complex machineries, which goes for our deployment tools. Therefore ensuring that every little thing is as planned means that we would have to check hundreds, if not thousands of items, each more to decipher than the last (anyone who has ever tried to solve a broken Xcode builds from an output log will know this).\n\nSo is there a better way? Unfortunately, when things break, any of those thousands of items could be the reason, so when stuff does break, the answer is most likely no, but what about just answering the simple question: \"Is something broken?\". Well, I am glad you asked because I do believe that there is a better way, and it is a way that revolves around Git.\n\n\n## Declaring your expected state\n\nSo I am going to talk about Kubernetes, yet again - A technology I use less and less but, for some reason, ends up being part of my examples more and more often.\n\nAt its core Kubernetes has two conceptually simple tasks; it stores an expected state of the resources that it is supposed to keep track of two; if any of those resources are, in fact, not in the expected state, it tries to right the wrong.\n\nThis approach means that when we interact with Kubernetes, we don't ask it to perform a specific task - We never tell it, \"create three additional instances of service X,\" but rather \", There should be five instances of service X\".\n\nThis approach also means that instead of actions and events, we can use reconciliation - no tracking of what was and what is, just what we expect; the rest is the tool's responsibility.\n\nIt also makes it very easy for Kubernetes to track the health of the infrastructure - it knows the expected state. If the actual state differs, it is in some unhealthy state, and if it is unhealthy, it should either fix it or, failing that, raise the alarm for manual intervention.\n\n\n## Git as the expected state\n\nSo how does this relate to Git? Well, Git is a version control system. As such, it should keep track of the state of the code. That, to me, doesn't just include when and why but also where - to elaborate: Git is already great at telling when something happened and also why (provided that you write good commit messages), but it should also be able to answer what is the code state in a given context.\n\nSo let's say you have a production environment; a good Git strategy, in my opinion, should be able to answer the question, \"What is the expected code state on production right now?\"\nAnd note the word \"expected\" here; it is crucial because Git is, of course, not able to do deployments or sync environments (in most cases) but what it can do is serve as our expected state that I talked about with Kubernetes.\n\nThe target is to be able to compare what we expect, with what is actually there completly independant of all the tooling that sits in between, as we want to remove those as a source of error or complexity.\n\n\nWe want to have something with the simplicity of the Kubernetes approach - we declare an expected state, and the tooling enforces this or alerts us if it can not.\n\nWe also need to ensure that we can compare our expected state to the actual state.\n\nTo achieve this we are going to focus on Git SHAs, so we will be tracking if a deployed resource is a deployment of our expected SHA.\n\nFor a web resource, an excellent way to do this could be through a `/.well-known/deployment-meta.json` while if you are running something like Terraform and AWS, you could tag your resources with this SHA - Try to have as few different methods of exposing this information as possible to keep monitoring simple.\n\nWith this piece of information, we are ready to create our monitor. Let's say we have a Git ref called `environments/production`, and its HEAD points to what we expect to be in production, now comparing is simply getting the SHA of the HEAD commit of that ref and comparing it to our `./well-known/deployment-meta.json`. If they match, the environment is in the expected state. If not, it is unhealthy.\n\nLet's extend on this a bit; we can add a scheduled task that checks the monitor. If it is unhealthy, it retriggers a deployment and, if that fails, raises the alarm - So even if a deployment failed and no one noticed it yet, it will get auto-corrected the next time our simple reconciler runs. This can be done simply using something like a GitHub workflow.\n\nYou could also go all in and write a crossplane controller and use the actual Kubernetes reconciler to ensure your environments are in a healty state - Go as creazy as you like, just remember to make the tool work for you, not the other way around.\n\nSo, now we have a setup where Git tracks the expected state, and we can easily compare the expected state and the actual state. Lastly, we have a reconciliation loop that tries to rectify any discrepancy.\n\n\n## Conclusion\n\nSo as a developer, the only thing I need to keep track of is that my Git refs are pointing to the right stuff. Everything else is reconciliation that I don't have to worry about - unless it is unreconcilable - and in which case, I will get alerted.\n\nAs someone responsible for the infrastructure, the only thing I need to keep track of is that the expected state matches the actual state.\n\nNo more multi-tool lookup, complex log dives or timeline reconstruction (until something fails, of course)\n\nI believe that the switch from Git being just the code to being the code state makes a lot of daily tasks more straightforward and more transparent, builds a more resilient infrastructure and is worth considering when deciding how you want to do Git.\n","cover":"/_next/static/assets/goodwrite/a-meta-talk-about-git-strategies/7a46cf537aa6c16d-cover.png","cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","meta":{"slug":"a-meta-talk-about-git-strategies","published":"2022-12-05","color":"#01eeed"},"stats":{"text":"7 min read","minutes":6.555,"time":393300,"words":1311},"files":["/github/workspace/articles/content/2022-12-05-git-strategy/intro-story.md","/github/workspace/articles/content/2022-12-05-git-strategy/intro-bridge.md","/github/workspace/articles/content/2022-12-05-git-strategy/expected-state.md","/github/workspace/articles/content/2022-12-05-git-strategy/git-as-expected-state.md","/github/workspace/articles/content/2022-12-05-git-strategy/setup.md","/github/workspace/articles/content/2022-12-05-git-strategy/conclusion.md"],"original":{"title":"A meta talk about Git strategies","cover":"cover.png","meta":{"slug":"a-meta-talk-about-git-strategies","published":"2022-12-05","color":"#01eeed"},"content":[{"content":[{"file":"intro-story.md","state":"first-draft"},{"file":"intro-bridge.md","state":"first-draft"}]},{"title":"Declaring your expected state","file":"expected-state.md","state":"final-draft"},{"title":"Git as the expected state","file":"git-as-expected-state.md","state":"final-draft"},{"file":"setup.md","state":"final-draft"},{"title":"Conclusion","file":"conclusion.md","state":"first-draft"}]},"parts":[{"content":"Let me start with a (semi) fictional story; It is Friday, and you and your team have spent the last five weeks working on this excellent new feature. You have written a bunch of unit tests to ensure that you maintain your project's impressive 100% test coverage, and both you, your product owner and the QA testers have all verified that everything is tip-top and ready to go for the launch!\nYou hit the big \"Deploy\" button.\n3-2-1\nSuccess! it is released to production, and everyone gets their glass of Champagne!\n\nYou go home for the weekend satisfied with the great job you did.\n\nOn Monday, you open your email to find it flooded with customers screaming that nothing is working! Oh no, you must have made a mistake!!! So you set about debugging and quickly locate the error message in your monitoring, so you checkout the code from Git and start investigating. But the error that happens isn't even possible. So you spend the entire day debugging, again and again, coming to the same conclusion; This is not possible.\n\nSo finally, you decide to go and read the deployment log line-by-painstakingly-line, and there, on line 13.318, you see it! One of your 12 microservices failed deployment! The deployment used a script with a pipe in it. Unfortunately, the script did not have pipefail configured. The script, therefore, did not generate a non-zero exit code, so the deployment just kept humming along, deploying the remaining 11 with success. This chain of events resulted in a broken infrastructure state and unhappy customers, and you spend the entire Monday debugging and potentially the ENTIRE EXISTANCE coming to an end!\n","file":"/github/workspace/articles/content/2022-12-05-git-strategy/intro-story.md","type":"file","path":[0,0],"cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","level":1,"state":"first-draft","stats":{"text":"2 min read","minutes":1.385,"time":83100,"words":277}},{"content":"I think most developers would have a story similar to the one above, so why is getting release management right so damn hard? Modern software architecture and the tools that help us are complex machineries, which goes for our deployment tools. Therefore ensuring that every little thing is as planned means that we would have to check hundreds, if not thousands of items, each more to decipher than the last (anyone who has ever tried to solve a broken Xcode builds from an output log will know this).\n\nSo is there a better way? Unfortunately, when things break, any of those thousands of items could be the reason, so when stuff does break, the answer is most likely no, but what about just answering the simple question: \"Is something broken?\". Well, I am glad you asked because I do believe that there is a better way, and it is a way that revolves around Git.\n","file":"/github/workspace/articles/content/2022-12-05-git-strategy/intro-bridge.md","type":"file","path":[0,1],"cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","level":1,"state":"first-draft","stats":{"text":"1 min read","minutes":0.775,"time":46500,"words":155}},{"content":"## Declaring your expected state\n\nSo I am going to talk about Kubernetes, yet again - A technology I use less and less but, for some reason, ends up being part of my examples more and more often.\n\nAt its core Kubernetes has two conceptually simple tasks; it stores an expected state of the resources that it is supposed to keep track of two; if any of those resources are, in fact, not in the expected state, it tries to right the wrong.\n\nThis approach means that when we interact with Kubernetes, we don't ask it to perform a specific task - We never tell it, \"create three additional instances of service X,\" but rather \", There should be five instances of service X\".\n\nThis approach also means that instead of actions and events, we can use reconciliation - no tracking of what was and what is, just what we expect; the rest is the tool's responsibility.\n\nIt also makes it very easy for Kubernetes to track the health of the infrastructure - it knows the expected state. If the actual state differs, it is in some unhealthy state, and if it is unhealthy, it should either fix it or, failing that, raise the alarm for manual intervention.\n","file":"/github/workspace/articles/content/2022-12-05-git-strategy/expected-state.md","type":"file","path":[1],"cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","level":1,"state":"final-draft","stats":{"text":"2 min read","minutes":1.015,"time":60900,"words":203}},{"content":"## Git as the expected state\n\nSo how does this relate to Git? Well, Git is a version control system. As such, it should keep track of the state of the code. That, to me, doesn't just include when and why but also where - to elaborate: Git is already great at telling when something happened and also why (provided that you write good commit messages), but it should also be able to answer what is the code state in a given context.\n\nSo let's say you have a production environment; a good Git strategy, in my opinion, should be able to answer the question, \"What is the expected code state on production right now?\"\nAnd note the word \"expected\" here; it is crucial because Git is, of course, not able to do deployments or sync environments (in most cases) but what it can do is serve as our expected state that I talked about with Kubernetes.\n\nThe target is to be able to compare what we expect, with what is actually there completly independant of all the tooling that sits in between, as we want to remove those as a source of error or complexity.\n","file":"/github/workspace/articles/content/2022-12-05-git-strategy/git-as-expected-state.md","type":"file","path":[2],"cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","level":1,"state":"final-draft","stats":{"text":"1 min read","minutes":0.95,"time":57000,"words":190}},{"content":"We want to have something with the simplicity of the Kubernetes approach - we declare an expected state, and the tooling enforces this or alerts us if it can not.\n\nWe also need to ensure that we can compare our expected state to the actual state.\n\nTo achieve this we are going to focus on Git SHAs, so we will be tracking if a deployed resource is a deployment of our expected SHA.\n\nFor a web resource, an excellent way to do this could be through a `/.well-known/deployment-meta.json` while if you are running something like Terraform and AWS, you could tag your resources with this SHA - Try to have as few different methods of exposing this information as possible to keep monitoring simple.\n\nWith this piece of information, we are ready to create our monitor. Let's say we have a Git ref called `environments/production`, and its HEAD points to what we expect to be in production, now comparing is simply getting the SHA of the HEAD commit of that ref and comparing it to our `./well-known/deployment-meta.json`. If they match, the environment is in the expected state. If not, it is unhealthy.\n\nLet's extend on this a bit; we can add a scheduled task that checks the monitor. If it is unhealthy, it retriggers a deployment and, if that fails, raises the alarm - So even if a deployment failed and no one noticed it yet, it will get auto-corrected the next time our simple reconciler runs. This can be done simply using something like a GitHub workflow.\n\nYou could also go all in and write a crossplane controller and use the actual Kubernetes reconciler to ensure your environments are in a healty state - Go as creazy as you like, just remember to make the tool work for you, not the other way around.\n\nSo, now we have a setup where Git tracks the expected state, and we can easily compare the expected state and the actual state. Lastly, we have a reconciliation loop that tries to rectify any discrepancy.\n","file":"/github/workspace/articles/content/2022-12-05-git-strategy/setup.md","type":"file","path":[3],"cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","level":1,"state":"final-draft","stats":{"text":"2 min read","minutes":1.705,"time":102300,"words":341}},{"content":"## Conclusion\n\nSo as a developer, the only thing I need to keep track of is that my Git refs are pointing to the right stuff. Everything else is reconciliation that I don't have to worry about - unless it is unreconcilable - and in which case, I will get alerted.\n\nAs someone responsible for the infrastructure, the only thing I need to keep track of is that the expected state matches the actual state.\n\nNo more multi-tool lookup, complex log dives or timeline reconstruction (until something fails, of course)\n\nI believe that the switch from Git being just the code to being the code state makes a lot of daily tasks more straightforward and more transparent, builds a more resilient infrastructure and is worth considering when deciding how you want to do Git.\n","file":"/github/workspace/articles/content/2022-12-05-git-strategy/conclusion.md","type":"file","path":[4],"cwd":"/github/workspace/articles/content/2022-12-05-git-strategy","level":1,"state":"first-draft","stats":{"text":"1 min read","minutes":0.66,"time":39600,"words":132}}],"pdf":"/_next/static/assets/goodwrite/04b1f0ca85cc0f8e/a-meta-talk-about-git-strategies.pdf"},{"title":"My day is being planned by an algorithm","content":"Allow me to introduce Bob. Bob is an algorithm, and he has just accepted a role as my assistant.\n\nI am not very good when it comes to planning my day, and the many apps out there that promise to help haven't solved the problem for me, usually due to three significant shortcomings:\n\n1.  Most day planner apps do what their paper counterparts would do: record the plan you create. I don't want to make the plan; someone should do that for me.\n2.  They help you create a plan at the start of the day that you have to follow throughout the day. My days aren't that static, so my schedule needs to change throughout the day.\n3.  They can't handle transits between locations very well.\n\nSo to solve those issues, I decided that the piece of silicon in my pocket, capable of doing a million calculations a second, should be able to help me do something other than waste time doom scrolling. It should let me get more done throughout the day and help me get more time for stuff I want to do. That is why I created Bob.\n\nAlso, I wanted a planning algorithm that was not only for productivity. I did not want to get into the same situation as poor Kiki in the book \"The circle\", who gets driven insane by a planning algorithm that tries to hyper-optimize her day. Bob also needs to plan downtime.\n\nBob is still pretty young and still learning new things, but he has gotten to the point where I believe he is good enough to start to use on a day to day basis.\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/07245c8edd55c1ea-Frame1.png)\n\nHow does Bob work? Bob gets a list of tasks, some from my calendar (both my work and my personal calendar), some from \"routines\" (which are daily tasks that I want to do most days, such as eating breakfast or picking up the kid), and some tasks come from \"goals\" which are a list of completable items. These tasks go into Bob, and he tries to create a plan for the next couple of days where I get everything done that I set out to do.\n\nTasks have a bit more data than your standard calendar events to allow for good scheduling\nAn \"earliest start time\" and a \"latest start time\". These define when the task can add it to the schedule.\n\n*   A list of locations where the task can be completed.\n*   A duration.\n*   If the task is required.\n*   A priority\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/cb8adfcb4b627db9-TaskBounds.png)\n\nBob uses a graph walk to create the optimal plan, where each node contains a few different things\n\n*   A list of remaining tasks\n*   A list of tasks that are impossible to complete in the current plan\n*   A score\n*   The current location\n*   The present time\n\nBob starts by figuring out which locations I can go to complete the remaining tasks and then create new leaf notes for all of those transits. Next, he figures out if some of the remaining tasks become impossible to complete and when I will arrive at the location and calculate a score for that node.\n\nHe then gets a list of all the remaining tasks for the current node which can be completed at the current location, again figuring out when I would be done with the task, updating the list of impossible tasks and scoring the node.\nIf any node adds a required task to the impossible list, that node is considered dead, and Bob will not analyze it further.\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/1dc952dd369ed17e-Graph1.png)\n\nNow we have a list of active leaves, and from that list, we find the node with the highest score and redo the process from above.\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/ad7b394a34cba988-Graph2.png)\n\nBob has four different strategies for finding a plan.\n\n*   First valid: this finds the first plan that satisfies all restrains but may lead to non-required tasks getting removed, even though it would be possible to find a plan that included all tasks. This strategy is the fastest and least precise strategy.\n*   First complete: this does the same as \"First valid\" but only exits early if it finds a plan that includes all tasks. This strategy will generally create pretty good plans but can contain excess transits. If it does not find any plans that contain all tasks, it will switch to the \"All valid\" strategy.\n*   All valid: this explores all paths until the path is either dead or completed. Then it finds the plan with the highest score. If there are no valid plans, it will switch to the \"All\" strategy.\n*   All: This explores all paths, even dead ones, and at the end returns the one with the highest score. This strategy allows a plan to be created even if it needs to remove some required tasks.\n\nScoring is quite simple at the moment, but something I plan to expand on a lot. Currently, the score gets increased when a task gets completed, and it gets decreased when a task becomes impossible. How much it is increased or decreased is influenced by the task's priority and if the task is required. It also decreases based on minutes spent transiting.\n\nThe leaf picked for analysis is the one with the highest score. This approach allows the two first strategies to create decent results, though they aren't guaranteed to be the best. It all comes down to how well tuned the scoring variables are tweaked. Currently, they aren't, but at some point, I plan to create a training algorithm for Bob, which will create plans, score them through \"All\", and then try to tweak the variables to arrive at the correct one with as few nodes analyzed as possible when running the same plan through \"First valid\"/\"First complete\".\n\nThis approach also allows me to calculate a plan with any start time, so I can re-plan it later in the day if I can't follow the original plan or if stuff gets added or removed. So this becomes a tool that helps me get the most out of my day without dictating it.\n\nBob can also do multi-day planning. Here, he gets a list of tasks for the different days as he usually would and a \"shared\" list of goals. So he runs the same calculation, adding in the tasks for that day, along with the shared goal list, and everything remaining from the shared list then gets carried over to the next day. This process repeats for all the remaining days.\n\nI have created a proof of concept app that houses Bob. I can manage tasks, generate plans, and update my calendar with those plans in this app.\n\nThere are also a few features that I want to add later. The most important one is an \"asset\" system. For instance, when calculating transits, it needs to know if I have brought the bike along because if I took public transit to work, it doesn't make sense to calculate a bike transit later in the day. This system would work by \"assets\" being tied to a task and location, and then when Bob creates plans, he knows to consider if the asset is there or not. Assets could also be tied to tasks, so one task may be to pick up something, another to drop it off. In those cases, assets would act as dependencies, so I have to have picked up the asset before being able to drop it off. The system is pretty simple to implement but causes the graph to grow a lot, so I need to do some optimizations before it makes sense to put it in.\n\nWrapping up; I have only been using Bob for a few days, but so far, he seems to create good plans and has helped me achieve more both productive tasks, also scheduling downtime such as reading, meditation, playing console etc. and ensuring that I had time for that in the plan.\n\nThere is still a lot of stuff that needs to be done, and I will add in features and fix the code base slowly over time.\n\nYou can find the source for this algorithm and the app it lives in at [Github](https://github.com/morten-olsen/bob-the-algorithm), but beware, it is a proof of concept, so readability or maintainability hasn't been a goal.\n","cover":"/_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/2a07a0952873d577-Cover.png","cwd":"/github/workspace/articles/content/2022-05-06-bob-the-algorithm","meta":{"slug":"bob-the-algorithm","published":"2022-05-06","color":"#e7d9ac"},"stats":{"text":"7 min read","minutes":6.91,"time":414600,"words":1382},"files":["/github/workspace/articles/content/2022-05-06-bob-the-algorithm/main.md"],"original":{"title":"My day is being planned by an algorithm","cover":"./Cover.png","meta":{"slug":"bob-the-algorithm","published":"2022-05-06","color":"#e7d9ac"},"content":["main.md"]},"parts":[{"content":"Allow me to introduce Bob. Bob is an algorithm, and he has just accepted a role as my assistant.\n\nI am not very good when it comes to planning my day, and the many apps out there that promise to help haven't solved the problem for me, usually due to three significant shortcomings:\n\n1.  Most day planner apps do what their paper counterparts would do: record the plan you create. I don't want to make the plan; someone should do that for me.\n2.  They help you create a plan at the start of the day that you have to follow throughout the day. My days aren't that static, so my schedule needs to change throughout the day.\n3.  They can't handle transits between locations very well.\n\nSo to solve those issues, I decided that the piece of silicon in my pocket, capable of doing a million calculations a second, should be able to help me do something other than waste time doom scrolling. It should let me get more done throughout the day and help me get more time for stuff I want to do. That is why I created Bob.\n\nAlso, I wanted a planning algorithm that was not only for productivity. I did not want to get into the same situation as poor Kiki in the book \"The circle\", who gets driven insane by a planning algorithm that tries to hyper-optimize her day. Bob also needs to plan downtime.\n\nBob is still pretty young and still learning new things, but he has gotten to the point where I believe he is good enough to start to use on a day to day basis.\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/07245c8edd55c1ea-Frame1.png)\n\nHow does Bob work? Bob gets a list of tasks, some from my calendar (both my work and my personal calendar), some from \"routines\" (which are daily tasks that I want to do most days, such as eating breakfast or picking up the kid), and some tasks come from \"goals\" which are a list of completable items. These tasks go into Bob, and he tries to create a plan for the next couple of days where I get everything done that I set out to do.\n\nTasks have a bit more data than your standard calendar events to allow for good scheduling\nAn \"earliest start time\" and a \"latest start time\". These define when the task can add it to the schedule.\n\n*   A list of locations where the task can be completed.\n*   A duration.\n*   If the task is required.\n*   A priority\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/cb8adfcb4b627db9-TaskBounds.png)\n\nBob uses a graph walk to create the optimal plan, where each node contains a few different things\n\n*   A list of remaining tasks\n*   A list of tasks that are impossible to complete in the current plan\n*   A score\n*   The current location\n*   The present time\n\nBob starts by figuring out which locations I can go to complete the remaining tasks and then create new leaf notes for all of those transits. Next, he figures out if some of the remaining tasks become impossible to complete and when I will arrive at the location and calculate a score for that node.\n\nHe then gets a list of all the remaining tasks for the current node which can be completed at the current location, again figuring out when I would be done with the task, updating the list of impossible tasks and scoring the node.\nIf any node adds a required task to the impossible list, that node is considered dead, and Bob will not analyze it further.\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/1dc952dd369ed17e-Graph1.png)\n\nNow we have a list of active leaves, and from that list, we find the node with the highest score and redo the process from above.\n\n![](/\\_next/static/assets/goodwrite/my-day-is-being-planned-by-an-algorithm/ad7b394a34cba988-Graph2.png)\n\nBob has four different strategies for finding a plan.\n\n*   First valid: this finds the first plan that satisfies all restrains but may lead to non-required tasks getting removed, even though it would be possible to find a plan that included all tasks. This strategy is the fastest and least precise strategy.\n*   First complete: this does the same as \"First valid\" but only exits early if it finds a plan that includes all tasks. This strategy will generally create pretty good plans but can contain excess transits. If it does not find any plans that contain all tasks, it will switch to the \"All valid\" strategy.\n*   All valid: this explores all paths until the path is either dead or completed. Then it finds the plan with the highest score. If there are no valid plans, it will switch to the \"All\" strategy.\n*   All: This explores all paths, even dead ones, and at the end returns the one with the highest score. This strategy allows a plan to be created even if it needs to remove some required tasks.\n\nScoring is quite simple at the moment, but something I plan to expand on a lot. Currently, the score gets increased when a task gets completed, and it gets decreased when a task becomes impossible. How much it is increased or decreased is influenced by the task's priority and if the task is required. It also decreases based on minutes spent transiting.\n\nThe leaf picked for analysis is the one with the highest score. This approach allows the two first strategies to create decent results, though they aren't guaranteed to be the best. It all comes down to how well tuned the scoring variables are tweaked. Currently, they aren't, but at some point, I plan to create a training algorithm for Bob, which will create plans, score them through \"All\", and then try to tweak the variables to arrive at the correct one with as few nodes analyzed as possible when running the same plan through \"First valid\"/\"First complete\".\n\nThis approach also allows me to calculate a plan with any start time, so I can re-plan it later in the day if I can't follow the original plan or if stuff gets added or removed. So this becomes a tool that helps me get the most out of my day without dictating it.\n\nBob can also do multi-day planning. Here, he gets a list of tasks for the different days as he usually would and a \"shared\" list of goals. So he runs the same calculation, adding in the tasks for that day, along with the shared goal list, and everything remaining from the shared list then gets carried over to the next day. This process repeats for all the remaining days.\n\nI have created a proof of concept app that houses Bob. I can manage tasks, generate plans, and update my calendar with those plans in this app.\n\nThere are also a few features that I want to add later. The most important one is an \"asset\" system. For instance, when calculating transits, it needs to know if I have brought the bike along because if I took public transit to work, it doesn't make sense to calculate a bike transit later in the day. This system would work by \"assets\" being tied to a task and location, and then when Bob creates plans, he knows to consider if the asset is there or not. Assets could also be tied to tasks, so one task may be to pick up something, another to drop it off. In those cases, assets would act as dependencies, so I have to have picked up the asset before being able to drop it off. The system is pretty simple to implement but causes the graph to grow a lot, so I need to do some optimizations before it makes sense to put it in.\n\nWrapping up; I have only been using Bob for a few days, but so far, he seems to create good plans and has helped me achieve more both productive tasks, also scheduling downtime such as reading, meditation, playing console etc. and ensuring that I had time for that in the plan.\n\nThere is still a lot of stuff that needs to be done, and I will add in features and fix the code base slowly over time.\n\nYou can find the source for this algorithm and the app it lives in at [Github](https://github.com/morten-olsen/bob-the-algorithm), but beware, it is a proof of concept, so readability or maintainability hasn't been a goal.\n","file":"/github/workspace/articles/content/2022-05-06-bob-the-algorithm/main.md","type":"file","path":[0],"cwd":"/github/workspace/articles/content/2022-05-06-bob-the-algorithm","level":1,"stats":{"text":"7 min read","minutes":6.91,"time":414600,"words":1382}}],"pdf":"/_next/static/assets/goodwrite/7c13c81d41949f47/my-day-is-being-planned-by-an-algorithm.pdf"},{"title":"A defence for the coding challange","content":"Let's talk about code challenges. Code challenges are a topic with many opinions and something I have been unsure if I liked or hated. Still, I would like to make a case for why I think there are situations where this practise is beneficial, not only for the interviewer but the candidate as well.\n\nBut before getting that far, I would like to point out some of the downsides to code challenges because it isn't one-size-fits-all, and you may want to steer completely clear of them or only use them in specific circumstances.\n\n### Downside 1\n\nThe primary issue with coding challenges is that they may be built in a way that prevents the candidate from showing their strength. I have, for instance, often seen those logic-style code challenges being applied to all development positions, so a front-end developer would be quizzed on his ability to solve sorting algorithms. What he would be supposed to do after being hired was to align stuff correctly with CSS. This skill test, which ultimately assesses an entirely different set of skills than what is needed, will alienate the candidate and allow a candidate with skills in the quizzed topic to overshine one with the basic skills required.\n\nLater I will talk a bit about some requirements that I think need to be considered in a good code test, so if used, at least would give a better indication of a candidate's skill concerning the specific role, not just as a \"guy who does computer stuff\".\n\n### Downside 2\n\nThe second one is one I have mentioned before, but in a competitive hiring market, being the company with the most prolonged hiring process means that you might very well miss out on some of the best candidates due to them not having the available time to complete these tasks in their spare time, or because another company was able to close the hire quicker.\n\n## Why you may want to use code challenges\n\nUnfortunately, many people don't perform well in interviews. Without a technical assessment, the only place for a candidate to showcase their skills is in the interview itself.\n\nThe IT space has historically been associated with an introvert stereotype. While not always the case, they are definitely out there, and there is nothing wrong with that, but they are usually not the strongest at selling themself, and that is basically what most job interviews are. So if we give a candidate only the ability to showcase their skills through an interview, it stands to reason that the guy we end out hiring isn't necessarily the strongest candidate for the job but the best at showcasing hers/his skill.\n\nUsing a code challenge alongside the interview allows you to use the interview part to assess the person, get an idea about how they would interact on the team, have time to explain to them what the job would be like, without having the \"hidden\" agenda, of trying to trip them up with random technical questions, to try to see if they can answer correctly on the spot.\n\nSo instead of the on the spot question style, the candidate would get the time to seek information and solve the tasks more reminiscent of how they would work in the real world.\n\nAdditionally, if done right, the code challenge can also help the company/team prepare for the new candidate after the hire. For example, suppose your code challenge can indicate the candidate's strengths, weaknesses and knowledge level with various technologies. This can help put the \"training\"-program together to support the new hire to be up and running and comfortable in the position as quickly as possible.\n\n### What makes a good code challenge\n\nIt isn't easy to answer, as it would vary from position to position, team to team, and company to company. Some jobs may require a specific knowledge set, where the \"implement a sorting algorithm\" may be the proper test and be something you would expect any candidate to be able to.\n\nBut here are a few questions I would use to evaluate the value of a code challenge:\n\n1.  Does it cover all the areas you are interested in in a candidate? This is not to evaluate if the candidate has ALL skills but rather to see if he has some skills which would add value to a team. For instance, if the role is for a front-end team that does both the front-end development, back-end for front-end, QA, DevOps, etc., the test should allow a candidate to showcase skills. If, for instance, your test is too heavily focused on one aspect, let's say front-end development, you may miss a candidate that could have elevated the entire team's ability at QA.\n2.  Does it allow for flexible timeframes? Some candidates may not have time to spend 20 hours completing your code challenge, and the test should respect that. So if you have a lot of different tasks, as in the example above, you shouldn't expect the candidate to complete all, even if he has the time. Instead, make a suggested time frame, and give the candidate the possibility of picking particular focus areas to complete. That way, you respect their time, and you also allow them to showcase the skills they feel they are strongest at.\n\nAnother bonus thing to add is to give the candidate the ability to submit additional considerations and caveats to their solution. For example, a candidate may have chosen a particular path because the \"right\" approach wasn't clear from the context, have made suboptimal solutions to keep within the timeframe, or even skipped parts because of scope but still want to elaborate. This way, you get closer to the complete picture, not just the code-to-repo.\n","cover":"/_next/static/assets/goodwrite/a-defence-for-the-coding-challange/e74588f9d6e844d5-cover.png","cwd":"/github/workspace/articles/content/2022-04-15-coding-challange","meta":{"published":"2022-04-15","slug":"a-defence-for-the-code-challange","color":"#3d91ef"},"stats":{"text":"5 min read","minutes":4.785,"time":287100,"words":957},"files":["/github/workspace/articles/content/2022-04-15-coding-challange/main.md"],"original":{"title":"A defence for the coding challange","cover":"cover.png","meta":{"published":"2022-04-15","slug":"a-defence-for-the-code-challange","color":"#3d91ef"},"content":[{"file":"main.md"}]},"parts":[{"content":"Let's talk about code challenges. Code challenges are a topic with many opinions and something I have been unsure if I liked or hated. Still, I would like to make a case for why I think there are situations where this practise is beneficial, not only for the interviewer but the candidate as well.\n\nBut before getting that far, I would like to point out some of the downsides to code challenges because it isn't one-size-fits-all, and you may want to steer completely clear of them or only use them in specific circumstances.\n\n### Downside 1\n\nThe primary issue with coding challenges is that they may be built in a way that prevents the candidate from showing their strength. I have, for instance, often seen those logic-style code challenges being applied to all development positions, so a front-end developer would be quizzed on his ability to solve sorting algorithms. What he would be supposed to do after being hired was to align stuff correctly with CSS. This skill test, which ultimately assesses an entirely different set of skills than what is needed, will alienate the candidate and allow a candidate with skills in the quizzed topic to overshine one with the basic skills required.\n\nLater I will talk a bit about some requirements that I think need to be considered in a good code test, so if used, at least would give a better indication of a candidate's skill concerning the specific role, not just as a \"guy who does computer stuff\".\n\n### Downside 2\n\nThe second one is one I have mentioned before, but in a competitive hiring market, being the company with the most prolonged hiring process means that you might very well miss out on some of the best candidates due to them not having the available time to complete these tasks in their spare time, or because another company was able to close the hire quicker.\n\n## Why you may want to use code challenges\n\nUnfortunately, many people don't perform well in interviews. Without a technical assessment, the only place for a candidate to showcase their skills is in the interview itself.\n\nThe IT space has historically been associated with an introvert stereotype. While not always the case, they are definitely out there, and there is nothing wrong with that, but they are usually not the strongest at selling themself, and that is basically what most job interviews are. So if we give a candidate only the ability to showcase their skills through an interview, it stands to reason that the guy we end out hiring isn't necessarily the strongest candidate for the job but the best at showcasing hers/his skill.\n\nUsing a code challenge alongside the interview allows you to use the interview part to assess the person, get an idea about how they would interact on the team, have time to explain to them what the job would be like, without having the \"hidden\" agenda, of trying to trip them up with random technical questions, to try to see if they can answer correctly on the spot.\n\nSo instead of the on the spot question style, the candidate would get the time to seek information and solve the tasks more reminiscent of how they would work in the real world.\n\nAdditionally, if done right, the code challenge can also help the company/team prepare for the new candidate after the hire. For example, suppose your code challenge can indicate the candidate's strengths, weaknesses and knowledge level with various technologies. This can help put the \"training\"-program together to support the new hire to be up and running and comfortable in the position as quickly as possible.\n\n### What makes a good code challenge\n\nIt isn't easy to answer, as it would vary from position to position, team to team, and company to company. Some jobs may require a specific knowledge set, where the \"implement a sorting algorithm\" may be the proper test and be something you would expect any candidate to be able to.\n\nBut here are a few questions I would use to evaluate the value of a code challenge:\n\n1.  Does it cover all the areas you are interested in in a candidate? This is not to evaluate if the candidate has ALL skills but rather to see if he has some skills which would add value to a team. For instance, if the role is for a front-end team that does both the front-end development, back-end for front-end, QA, DevOps, etc., the test should allow a candidate to showcase skills. If, for instance, your test is too heavily focused on one aspect, let's say front-end development, you may miss a candidate that could have elevated the entire team's ability at QA.\n2.  Does it allow for flexible timeframes? Some candidates may not have time to spend 20 hours completing your code challenge, and the test should respect that. So if you have a lot of different tasks, as in the example above, you shouldn't expect the candidate to complete all, even if he has the time. Instead, make a suggested time frame, and give the candidate the possibility of picking particular focus areas to complete. That way, you respect their time, and you also allow them to showcase the skills they feel they are strongest at.\n\nAnother bonus thing to add is to give the candidate the ability to submit additional considerations and caveats to their solution. For example, a candidate may have chosen a particular path because the \"right\" approach wasn't clear from the context, have made suboptimal solutions to keep within the timeframe, or even skipped parts because of scope but still want to elaborate. This way, you get closer to the complete picture, not just the code-to-repo.\n","file":"/github/workspace/articles/content/2022-04-15-coding-challange/main.md","type":"file","path":[0],"cwd":"/github/workspace/articles/content/2022-04-15-coding-challange","level":1,"stats":{"text":"5 min read","minutes":4.785,"time":287100,"words":957}}],"pdf":"/_next/static/assets/goodwrite/fc0f9c1e8b8c0967/a-defence-for-the-coding-challange.pdf"},{"title":"How to hire engineers, by an engineer","content":"It has been a few years since I have been part of the recruitment process. Still, I did reasonably go through the hiring process when looking for a new job so that I will mix a bit from both sides for this article, so you get both some experience from hires and what worked and experience from the other side of the table and what caused my not to consider a company, because spoiler alert: Engineers are contacted a lot!\n\nSo first I need to introduce a hard truth as this will be underpining a lot of my points and is most likely the most important take away from this: Your company is not unique\n\nUnless your tech brand is among the X highest regarded in the world, your company alone isn't a selling point. I have been contacted by so many companies which thought because they were leader in their field or had a \"great product\" that makes candidates come banging at their door. If I could disclose all those messages it would be really easy to see that except for the order of information all says almost the same thing, and chances are you job listing is the same. Sorry.\nThe take away from this is that if everything is equal any misstep in your hiring process can cost you that candidate, so if you are not amongst the strongest of tech brands you need to be extremely aware or you will NOT fill the position\n\nOkay after that slap in the face we can take a second to look at something...\n\nA lot of people focuses on skills when hirering, and of cause the candidate should have the skills for the position, but I will make a case to put less focus on the hard skills and more focus on passion.\n\nUsually screening skills through an interview is hard and techniques like code challenges has their own issues, but more on that later.\nScreening for passion is easier, usually you can get a good feeling if a candidate is passionate about a specific topic, and passionate people want to learn! So even if the candidate has limited skills, if they have passion they will learn and they will outgrow a candidate with experience but no passion.\nFilling a team with technically skills can solve an immediate requirement, but companies, teams and products change, your requirements will change along with it. Building a passionate team will adjust and evolve along where a product where a team consisting of skilled people but without passion will stay where they where when you hired them.\n\nAnother issue I see in many job postings is requiring a long list of skills. It would be awesome to find someone skilled in everything and who could solve all tasks. In the real world, when ever you add another skill to that list you are limiting the list of candidates that would fit so chances are you are not going to find anyone or the actual skills of any candidate in that very narrow list will be way lower than in a wider pool.\nA better way is to just add the most important skills, and learn the candidate any less important skills at the job. If you hired passionate people this should be possible (remember to screen for passion about learning new things)\n\nWhile we are on the expected skill list: A lot of companies has this list of \"it would be really nice if you had these skills\". Well those could definitely be framed as learning experiences instead. If you have recruited passionate people, seeing that you will learn new cool skills count as a plus and any candidate who already have the skill will see it and think \"awesome, I am already uniquely suited for the job!\"\n\nI promised to talk a bit about code challenges: They can be useful to screen a candidates ability to just go in and start to work from day one, and if done correctly can help a manager organise their process to best suit the teams unique skills but...\nHiring at the moment is hard! And as stated pretty much any job listing I have seen are identical, so as in a competitive job market where a small outlier on your resumé lands you in the pile never read through, as likely is it in a competitive hiring market that your listing never gets acted upon.\nEngineers are contacted a lot by recruiters and speaking to all would require a lot of work so if a company has a prolonged process it quickly gets sorted out, especially by the best candidates whom most likely get contacted the most and most likely have a full time job so time is a scarce resource.\nSo be aware that if you use time consuming processes such as the code challenge you might miss out on the best candidates.\n\n![](/\\_next/static/assets/goodwrite/how-to-hire-engineers-by-an-engineer/372135894881793a-img1.png)\n\nPlease just disclose the salary range. From being connected to a few hundred recruiters here on LinkedIn I can see that this isn't just me but a general issue. As mentioned before, it takes very little to have your listings ignored and most likely most of your strongest potential candidates already has full time jobs, and would not want to move to a position paying less unless the position where absolutely unique (which again, yours most likely isn't). Therefore if you choose not to disclose the salary range be aware that you miss out on most of the best candidates. A company will get an immediate no from me if not disclosing the salary range.\n\nLastly, I have spend a lot of words telling your that your company or position isn't unique, and well we both know that is not accurate, your company most likely has something unique to offer! Be that soft values or hard benefits. Be sure to put them in your job listing, to bring out this uniqueness, it is what is going to set you apart from the other listing. There are lot of other companies with the same tech stack, using an agile approach, with a high degree of autonomy, with a great team... But what can you offer that no one else can? Get it front and center... Recruiting is marketing and good copy writing\n","cover":"/_next/static/assets/goodwrite/how-to-hire-engineers-by-an-engineer/1016b01a9b16141e-cover.png","cwd":"/github/workspace/articles/content/2022-03-16-hiring","meta":{"slug":"hiring","published":"2022-03-16","color":"#8bae8c"},"stats":{"text":"6 min read","minutes":5.255,"time":315300,"words":1051},"files":["/github/workspace/articles/content/2022-03-16-hiring/main.md"],"original":{"title":"How to hire engineers, by an engineer","cover":"cover.png","meta":{"slug":"hiring","published":"2022-03-16","color":"#8bae8c"},"content":["main.md"]},"parts":[{"content":"It has been a few years since I have been part of the recruitment process. Still, I did reasonably go through the hiring process when looking for a new job so that I will mix a bit from both sides for this article, so you get both some experience from hires and what worked and experience from the other side of the table and what caused my not to consider a company, because spoiler alert: Engineers are contacted a lot!\n\nSo first I need to introduce a hard truth as this will be underpining a lot of my points and is most likely the most important take away from this: Your company is not unique\n\nUnless your tech brand is among the X highest regarded in the world, your company alone isn't a selling point. I have been contacted by so many companies which thought because they were leader in their field or had a \"great product\" that makes candidates come banging at their door. If I could disclose all those messages it would be really easy to see that except for the order of information all says almost the same thing, and chances are you job listing is the same. Sorry.\nThe take away from this is that if everything is equal any misstep in your hiring process can cost you that candidate, so if you are not amongst the strongest of tech brands you need to be extremely aware or you will NOT fill the position\n\nOkay after that slap in the face we can take a second to look at something...\n\nA lot of people focuses on skills when hirering, and of cause the candidate should have the skills for the position, but I will make a case to put less focus on the hard skills and more focus on passion.\n\nUsually screening skills through an interview is hard and techniques like code challenges has their own issues, but more on that later.\nScreening for passion is easier, usually you can get a good feeling if a candidate is passionate about a specific topic, and passionate people want to learn! So even if the candidate has limited skills, if they have passion they will learn and they will outgrow a candidate with experience but no passion.\nFilling a team with technically skills can solve an immediate requirement, but companies, teams and products change, your requirements will change along with it. Building a passionate team will adjust and evolve along where a product where a team consisting of skilled people but without passion will stay where they where when you hired them.\n\nAnother issue I see in many job postings is requiring a long list of skills. It would be awesome to find someone skilled in everything and who could solve all tasks. In the real world, when ever you add another skill to that list you are limiting the list of candidates that would fit so chances are you are not going to find anyone or the actual skills of any candidate in that very narrow list will be way lower than in a wider pool.\nA better way is to just add the most important skills, and learn the candidate any less important skills at the job. If you hired passionate people this should be possible (remember to screen for passion about learning new things)\n\nWhile we are on the expected skill list: A lot of companies has this list of \"it would be really nice if you had these skills\". Well those could definitely be framed as learning experiences instead. If you have recruited passionate people, seeing that you will learn new cool skills count as a plus and any candidate who already have the skill will see it and think \"awesome, I am already uniquely suited for the job!\"\n\nI promised to talk a bit about code challenges: They can be useful to screen a candidates ability to just go in and start to work from day one, and if done correctly can help a manager organise their process to best suit the teams unique skills but...\nHiring at the moment is hard! And as stated pretty much any job listing I have seen are identical, so as in a competitive job market where a small outlier on your resumé lands you in the pile never read through, as likely is it in a competitive hiring market that your listing never gets acted upon.\nEngineers are contacted a lot by recruiters and speaking to all would require a lot of work so if a company has a prolonged process it quickly gets sorted out, especially by the best candidates whom most likely get contacted the most and most likely have a full time job so time is a scarce resource.\nSo be aware that if you use time consuming processes such as the code challenge you might miss out on the best candidates.\n\n![](/\\_next/static/assets/goodwrite/how-to-hire-engineers-by-an-engineer/372135894881793a-img1.png)\n\nPlease just disclose the salary range. From being connected to a few hundred recruiters here on LinkedIn I can see that this isn't just me but a general issue. As mentioned before, it takes very little to have your listings ignored and most likely most of your strongest potential candidates already has full time jobs, and would not want to move to a position paying less unless the position where absolutely unique (which again, yours most likely isn't). Therefore if you choose not to disclose the salary range be aware that you miss out on most of the best candidates. A company will get an immediate no from me if not disclosing the salary range.\n\nLastly, I have spend a lot of words telling your that your company or position isn't unique, and well we both know that is not accurate, your company most likely has something unique to offer! Be that soft values or hard benefits. Be sure to put them in your job listing, to bring out this uniqueness, it is what is going to set you apart from the other listing. There are lot of other companies with the same tech stack, using an agile approach, with a high degree of autonomy, with a great team... But what can you offer that no one else can? Get it front and center... Recruiting is marketing and good copy writing\n","file":"/github/workspace/articles/content/2022-03-16-hiring/main.md","type":"file","path":[0],"cwd":"/github/workspace/articles/content/2022-03-16-hiring","level":1,"stats":{"text":"6 min read","minutes":5.255,"time":315300,"words":1051}}],"pdf":"/_next/static/assets/goodwrite/5faab1321ecc3009/how-to-hire-engineers-by-an-engineer.pdf"},{"title":"My home runs Redux","content":"I have been playing around with smart homes for a long time; I have used most of the platforms out there, I have developed quite a few myself, and one thing I keep coming back to is Redux.\n\nThose who know what Redux is may find this a weird choice, but for those who don't know Redux, I'll give a brief introduction to get up to speed.\n\nRedux is a state management framework, initially built for a React talk by Dan Abramov and is still primarily associated with managing React applications. Redux has a declarative state derived through a \"reducer\"-function. This reducer function takes in the current state and an event, and, based on that event, it gives back an updated state. So you have an initial state inside Redux, and then you dispatch events into it, each getting the current state and updating it. That means that the resulting state will always be the same given the same set of events.\n\nSo why is a framework primarily used to keep track of application state for React-based frontends a good fit for a smart home? Well, your smart home platform most likely closely mimics this architecture already!\n\nFirst, an event goes in, such as a motion sensor triggering, or you set the bathroom light to 75% brightness in the interface. This event then goes into the platform and hits some automation or routine, resulting in an update request getting sent to the correct devices, which then change the state to correspond to the new state.\n\n...But that is not quite what happens on most platforms. Deterministic events may go into the system, but this usually doesn't cause a change to a deterministic state. Instead, it gets dispatched to the device, the devices updates, the platform sees this change, and then it updates its state to represent that new state.\n\nThis distinction is essential because it comes with a few drawbacks:\n\n*   Because the event does not change the state but sends a request to the device that does it, everything becomes asynchronous and can happen out of order. This behaviour can be seen either as an issue or a feature, but it does make integrating with it a lot harder from a technical point of view.\n*   The request is sent to the device as a \"fire-and-forget\" event. It then relies on the success of that request and the subsequent state change to be reported back from the device before the state gets updated. This behaviour means that if this request fails (something you often see with ZigBee-based devices), the device and the state don't get updated.\n*   Since the device is responsible for reporting the state change, you are dependent on having that actual device there to make the change. Without sending the changes to the actual device, you cannot test the setup.\n\nSo can we create a setup that gets away from these issues?\n\nAnother thing to add here is more terminology/philosophy, but most smart home setups are, in my opinion, not really smart, just connected and, to some extent, automated. I want a design that has some actual smartness to it. In this article, I will outline a setup closer to that of the connected, automated home, and at the end, I will give some thoughts on how to take this to the next level and make it smart.\n\nWe know what we want to achieve, and Redux can help us solve this. Remember that Redux takes actions and applies them in a deterministic way to produce a deterministic state.\n\nTime to go a bit further down the React rabbit hole because another thing from React-land comes in handy here: the concept of reconciliation.\n\nInstead of dispatching events to the devices waiting for them to update and report their state back, we can rely on reconciliation to update our device. For example, let's say we have a device state for our living room light that says it is at 80% brightness in our Redux store. So now we dispatch an event that sets it to 20% brightness.\n\nInstead of sending this event to the device, we update the Redux state.\n\nWe have a state listener that detects when the state changes and compares it to the state of the actual device. In our case, it seems that the state indicates that the living room light should be at 20% but are, in fact, at 80%, so it sends a request to the actual device to update it to the correct value.\n\nWe can also do schedule reconciliation to compare our Redux state to that of the actual devices. If a device fails to update its state after a change, it will automatically get updated on our next scheduled run, ensuring that our smart home devices always reflect our state.\n\n*Sidenote: Yes, of course, I have done a proof of concept using React with a home build reconciliation that reflected the virtual dom unto physical devices, just to have had a house that ran React-Redux*\n\nLet's go through our list of issues with how most platforms handle this. We can see that we have eliminated all of them by switching to this Redux-reconciliation approach: we update the state directly to run it synchronously. We can re-run the reconciliation so failed or dropped device updates get re-run. We don't require any physical devices as our state is directly updated.\n\nWe now have a robust, reliable, state management mechanism for our smart home, time to add some smarts to it. It is a little outside the article's main focus as this is just my way of doing it; there may be way better ways, so use it at your discretion.\n\nRedux has the concept of middlewares which are stateful functions that live between the event going into Redux and the reducer updating the state. These middlewares allow Redux to deal with side effects and do event transformations.\n\nTime for another piece of my smart home philosophy: Most smart homes act on events, and I have used the word throughout this article, but to me, events are not the most valuable thing when creating a smart home, instead I would argue that the goal is to deal with intents rather than events. For instance, an event could be that I started to play a video on the TV. But, that state a fact, what we want to do is instead capture what I am trying to achieve, the \"intent\", so lets split this event into two intents; if the video is less than one hour, I want to watch a TV show, if it is more I want to watch a movie.\n\nThese intents allow us to not deal with weak-meaning events to do complex operations but instead split our concern into two separate concepts: intent classification and intent execution.\n\nSo last thing we need is a direct way of updating devices, as we can not capture everything through our intent classifier. For instance, if I sit down to read a book that does not generate any sensor data for our system to react to, I will still need a way to adjust device states manually. (I could add a button that would dispatch a reading intent)\n\nI have separated the events going into Redux into two types:\n\n*   control events, which directly controls a device\n*   environment events represent sensor data coming in (push on a button, motion sensor triggering, TV playing, etc.)\n\nNow comes the part I have feared, where I need to draw a diagram.\n\n...sorry\n\n![Image description](/\\_next/static/assets/goodwrite/my-home-runs-redux/9d1381348a3c64db-graph.png)\n\nSo this shows our final setup.\n\nEvents go into our Redux setup, either environment or control.\n\nControl events go straight to the reducer, and the state is updated.\n\nEnvironment events first go to the intent classifier, which uses previous events, the current state, and the incoming event to derive the correct intent. The intent then goes into our intent executor, which converts the intent into a set of actual device changes, which gets sent to our reducer, and the state is then updated.\n\nLastly, we invoke the reconciliation to update our real devices to reflect our new state.\n\nThere we go! Now we have ended up with a self-contained setup. We can run it without the reconciliation or mock it to create tests for our setup and work without changing any real devices, and we can re-run the reconciliation on our state to ensure our state gets updated correctly, even if a device should miss an update.\n\n**Success!!!**\n\nBut I promised to give an idea of how to take this smart home and make it actually \"smart.\"\n\nLet's imagine that we did not want to \"program\" our smart home. Instead, we wanted to use it; turning the lights on and off using the switches when we entered and exited a room, dimming the lights for movie time, and so on, and over time we want our smart home to pick up on those routines and start to do them for us.\n\nWe have a setup where we both have control events and environments coming in. Control events represent how we want the state of our home to be in a given situation. Environment events represent what happened in our home. So we could store those historically with some machine learning and look for patterns.\n\nLet's say you always dim the light when playing a movie that is more than one hour long; your smart home would be able to recognize this pattern and automatically start to do this routine for you.\n\nWould this work? I don't know. I am trying to get more skilled at machine learning to find out.\n","cover":"/_next/static/assets/goodwrite/my-home-runs-redux/0922b239d7114bab-cover.png","cwd":"/github/workspace/articles/content/2022-03-15-my-home-runs-redux","meta":{"slug":"my-home-runs-redux","published":"2022-03-15","color":"#e80ccf"},"stats":{"text":"9 min read","minutes":8.05,"time":483000,"words":1610},"files":["/github/workspace/articles/content/2022-03-15-my-home-runs-redux/main.md"],"original":{"title":"My home runs Redux","cover":"cover.png","meta":{"slug":"my-home-runs-redux","published":"2022-03-15","color":"#e80ccf"},"content":["main.md"]},"parts":[{"content":"I have been playing around with smart homes for a long time; I have used most of the platforms out there, I have developed quite a few myself, and one thing I keep coming back to is Redux.\n\nThose who know what Redux is may find this a weird choice, but for those who don't know Redux, I'll give a brief introduction to get up to speed.\n\nRedux is a state management framework, initially built for a React talk by Dan Abramov and is still primarily associated with managing React applications. Redux has a declarative state derived through a \"reducer\"-function. This reducer function takes in the current state and an event, and, based on that event, it gives back an updated state. So you have an initial state inside Redux, and then you dispatch events into it, each getting the current state and updating it. That means that the resulting state will always be the same given the same set of events.\n\nSo why is a framework primarily used to keep track of application state for React-based frontends a good fit for a smart home? Well, your smart home platform most likely closely mimics this architecture already!\n\nFirst, an event goes in, such as a motion sensor triggering, or you set the bathroom light to 75% brightness in the interface. This event then goes into the platform and hits some automation or routine, resulting in an update request getting sent to the correct devices, which then change the state to correspond to the new state.\n\n...But that is not quite what happens on most platforms. Deterministic events may go into the system, but this usually doesn't cause a change to a deterministic state. Instead, it gets dispatched to the device, the devices updates, the platform sees this change, and then it updates its state to represent that new state.\n\nThis distinction is essential because it comes with a few drawbacks:\n\n*   Because the event does not change the state but sends a request to the device that does it, everything becomes asynchronous and can happen out of order. This behaviour can be seen either as an issue or a feature, but it does make integrating with it a lot harder from a technical point of view.\n*   The request is sent to the device as a \"fire-and-forget\" event. It then relies on the success of that request and the subsequent state change to be reported back from the device before the state gets updated. This behaviour means that if this request fails (something you often see with ZigBee-based devices), the device and the state don't get updated.\n*   Since the device is responsible for reporting the state change, you are dependent on having that actual device there to make the change. Without sending the changes to the actual device, you cannot test the setup.\n\nSo can we create a setup that gets away from these issues?\n\nAnother thing to add here is more terminology/philosophy, but most smart home setups are, in my opinion, not really smart, just connected and, to some extent, automated. I want a design that has some actual smartness to it. In this article, I will outline a setup closer to that of the connected, automated home, and at the end, I will give some thoughts on how to take this to the next level and make it smart.\n\nWe know what we want to achieve, and Redux can help us solve this. Remember that Redux takes actions and applies them in a deterministic way to produce a deterministic state.\n\nTime to go a bit further down the React rabbit hole because another thing from React-land comes in handy here: the concept of reconciliation.\n\nInstead of dispatching events to the devices waiting for them to update and report their state back, we can rely on reconciliation to update our device. For example, let's say we have a device state for our living room light that says it is at 80% brightness in our Redux store. So now we dispatch an event that sets it to 20% brightness.\n\nInstead of sending this event to the device, we update the Redux state.\n\nWe have a state listener that detects when the state changes and compares it to the state of the actual device. In our case, it seems that the state indicates that the living room light should be at 20% but are, in fact, at 80%, so it sends a request to the actual device to update it to the correct value.\n\nWe can also do schedule reconciliation to compare our Redux state to that of the actual devices. If a device fails to update its state after a change, it will automatically get updated on our next scheduled run, ensuring that our smart home devices always reflect our state.\n\n*Sidenote: Yes, of course, I have done a proof of concept using React with a home build reconciliation that reflected the virtual dom unto physical devices, just to have had a house that ran React-Redux*\n\nLet's go through our list of issues with how most platforms handle this. We can see that we have eliminated all of them by switching to this Redux-reconciliation approach: we update the state directly to run it synchronously. We can re-run the reconciliation so failed or dropped device updates get re-run. We don't require any physical devices as our state is directly updated.\n\nWe now have a robust, reliable, state management mechanism for our smart home, time to add some smarts to it. It is a little outside the article's main focus as this is just my way of doing it; there may be way better ways, so use it at your discretion.\n\nRedux has the concept of middlewares which are stateful functions that live between the event going into Redux and the reducer updating the state. These middlewares allow Redux to deal with side effects and do event transformations.\n\nTime for another piece of my smart home philosophy: Most smart homes act on events, and I have used the word throughout this article, but to me, events are not the most valuable thing when creating a smart home, instead I would argue that the goal is to deal with intents rather than events. For instance, an event could be that I started to play a video on the TV. But, that state a fact, what we want to do is instead capture what I am trying to achieve, the \"intent\", so lets split this event into two intents; if the video is less than one hour, I want to watch a TV show, if it is more I want to watch a movie.\n\nThese intents allow us to not deal with weak-meaning events to do complex operations but instead split our concern into two separate concepts: intent classification and intent execution.\n\nSo last thing we need is a direct way of updating devices, as we can not capture everything through our intent classifier. For instance, if I sit down to read a book that does not generate any sensor data for our system to react to, I will still need a way to adjust device states manually. (I could add a button that would dispatch a reading intent)\n\nI have separated the events going into Redux into two types:\n\n*   control events, which directly controls a device\n*   environment events represent sensor data coming in (push on a button, motion sensor triggering, TV playing, etc.)\n\nNow comes the part I have feared, where I need to draw a diagram.\n\n...sorry\n\n![Image description](/\\_next/static/assets/goodwrite/my-home-runs-redux/9d1381348a3c64db-graph.png)\n\nSo this shows our final setup.\n\nEvents go into our Redux setup, either environment or control.\n\nControl events go straight to the reducer, and the state is updated.\n\nEnvironment events first go to the intent classifier, which uses previous events, the current state, and the incoming event to derive the correct intent. The intent then goes into our intent executor, which converts the intent into a set of actual device changes, which gets sent to our reducer, and the state is then updated.\n\nLastly, we invoke the reconciliation to update our real devices to reflect our new state.\n\nThere we go! Now we have ended up with a self-contained setup. We can run it without the reconciliation or mock it to create tests for our setup and work without changing any real devices, and we can re-run the reconciliation on our state to ensure our state gets updated correctly, even if a device should miss an update.\n\n**Success!!!**\n\nBut I promised to give an idea of how to take this smart home and make it actually \"smart.\"\n\nLet's imagine that we did not want to \"program\" our smart home. Instead, we wanted to use it; turning the lights on and off using the switches when we entered and exited a room, dimming the lights for movie time, and so on, and over time we want our smart home to pick up on those routines and start to do them for us.\n\nWe have a setup where we both have control events and environments coming in. Control events represent how we want the state of our home to be in a given situation. Environment events represent what happened in our home. So we could store those historically with some machine learning and look for patterns.\n\nLet's say you always dim the light when playing a movie that is more than one hour long; your smart home would be able to recognize this pattern and automatically start to do this routine for you.\n\nWould this work? I don't know. I am trying to get more skilled at machine learning to find out.\n","file":"/github/workspace/articles/content/2022-03-15-my-home-runs-redux/main.md","type":"file","path":[0],"cwd":"/github/workspace/articles/content/2022-03-15-my-home-runs-redux","level":1,"stats":{"text":"9 min read","minutes":8.05,"time":483000,"words":1610}}],"pdf":"/_next/static/assets/goodwrite/d113a300e5519f38/my-home-runs-redux.pdf"}],"positions":[{"attributes":{"company":"ZeroNorth","title":"Senior Software Engineer","start":1609459200000,"end":null},"body":"Hello World\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"y7INGK_DVu8tDiLZNxzH_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>